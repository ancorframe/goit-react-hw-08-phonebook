"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[808],{4808:function(e,n,r){r.r(n),r.d(n,{ContactsPage:function(){return re}});var a,t,o=r(5861),i=r(4687),l=r.n(i),c=r(9457),s=r(885),d=r(2791),u=r(7103),h=r(7205),m=r(5017),x=r(803),f=r(3793),p=r(3978),v=r(4565),g=r(8619),j=r(6015),Z=r(5984),b=r(5705),C=r(6351),y=r(3649),w=r(9434),k=r(5672),T=r(5473),q=r(7488),S=r(7237),E=r(1065),W=r(184),I=u.Ry().shape({name:u.Z_().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:u.Z_("Enter your email").email("Enter a valid email").required("Email is required"),phone:u.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(13,"Too Short!").max(13,"Too Long!").required("Required")}),P=function(){var e=(0,Z.x0)(),n=(0,Z.x0)(),r=(0,Z.x0)(),a=(0,Z.x0)(),t=(0,w.v9)(C.mk),i=(0,w.I0)(),c=(0,d.useState)(null),u=(0,s.Z)(c,2),P=u[0],_=u[1],B=(0,b.TA)({initialValues:{name:"",email:"",phone:"",favorite:!1},validationSchema:I,onSubmit:function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),!t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))){e.next=3;break}return e.abrupt("return",(0,k.VW)("".concat(n.name," is already in contacts.")));case 3:return e.prev=3,e.next=6,i((0,y.uK)(n));case 6:_(!1),(0,k.t5)("Contact add to contacts book"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),_(!1),(0,k.cB)("".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(n){return e.apply(this,arguments)}}()});return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(x.Z,{maxWidth:"xs",children:[(0,W.jsx)(f.ZP,{}),(0,W.jsxs)(j.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,W.jsx)(p.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,W.jsx)(g.Z,{})}),(0,W.jsx)(v.Z,{component:"h1",variant:"h5",children:"Add Contact"}),(0,W.jsxs)(j.Z,{as:"form",onSubmit:B.handleSubmit,sx:{mt:1},children:[(0,W.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:e,name:"name",label:"Name",value:B.values.name,onChange:B.handleChange,error:B.touched.name&&Boolean(B.errors.name),helperText:B.touched.name&&B.errors.name,autoComplete:"off"}),(0,W.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:r,name:"email",label:"Email",value:B.values.email,onChange:B.handleChange,error:B.touched.email&&Boolean(B.errors.email),helperText:B.touched.email&&B.errors.email,autoComplete:"off"}),(0,W.jsx)(m.Z,{margin:"normal",fullWidth:!0,required:!0,id:n,name:"phone",label:"Phone",type:"tel",value:B.values.phone,onChange:B.handleChange,error:B.touched.phone&&Boolean(B.errors.phone),helperText:B.touched.phone&&B.errors.phone,autoComplete:"off"}),(0,W.jsx)(E.Z,{control:(0,W.jsx)(T.Z,{id:a,name:"favorite",checked:B.values.favorite,onChange:B.handleChange,inputProps:{"aria-label":"controlled"},icon:(0,W.jsx)(q.Z,{}),checkedIcon:(0,W.jsx)(S.Z,{})}),label:"favorite"}),(0,W.jsx)(h.Z,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:3,mb:2},disabled:P,children:"Add contact"})]})]})]})})},_=(r(5462),r(5590)),B=r(1286),L=r(7247),A=r(4164),R=r(168),F=r(7691),N=F.ZP.div(a||(a=(0,R.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n"]))),z=F.ZP.div(t||(t=(0,R.Z)(["\n  max-width: calc(100vw - 48px);\n  max-height: calc(100vh - 24px);\n"]))),D=document.querySelector("#modal-root"),K=function(e){var n=e.onBackdropClose,r=e.children;return A.createPortal((0,W.jsx)(N,{onClick:function(e){return n(e)},children:(0,W.jsx)(z,{children:r})}),D)},V=r(4919),G=u.Ry().shape({name:u.Z_().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:u.Z_("Enter your email").email("Enter a valid email").required("Email is required"),phone:u.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(13,"Too Short!").max(13,"Too Long!").required("Required")}),$=function(e){var n=e.value,r=e.close,a=n._id,t=(0,Z.x0)(),o=(0,Z.x0)(),i=(0,Z.x0)(),l=(0,Z.x0)(),c=(0,w.I0)(),s=(0,b.TA)({initialValues:{name:n.name,email:n.email,phone:n.phone,favorite:n.favorite},validationSchema:G,onSubmit:function(e){c((0,y.z)({values:e,id:a})).unwrap().then((function(){(0,k.t5)("Contact modified"),r()})).catch((function(e){return(0,k.cB)("".concat(e))}))}});return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(x.Z,{maxWidth:"xs",children:[(0,W.jsx)(f.ZP,{}),(0,W.jsxs)(j.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#ffffff",padding:"15px",borderRadius:"4px"},children:[(0,W.jsx)(p.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,W.jsx)(V.Z,{})}),(0,W.jsx)(v.Z,{component:"h1",variant:"h5",children:"Edit contact"}),(0,W.jsxs)(j.Z,{as:"form",onSubmit:s.handleSubmit,sx:{mt:1},children:[(0,W.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:t,name:"name",label:"Name",value:s.values.name,onChange:s.handleChange,error:s.touched.name&&Boolean(s.errors.name),helperText:s.touched.name&&s.errors.name}),(0,W.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:i,name:"email",label:"Email",value:s.values.email,onChange:s.handleChange,error:s.touched.email&&Boolean(s.errors.email),helperText:s.touched.email&&s.errors.email}),(0,W.jsx)(m.Z,{margin:"normal",fullWidth:!0,required:!0,id:o,name:"phone",label:"Phone",type:"tel",value:s.values.phone,onChange:s.handleChange,error:s.touched.phone&&Boolean(s.errors.phone),helperText:s.touched.phone&&s.errors.phone}),(0,W.jsx)(E.Z,{control:(0,W.jsx)(T.Z,{id:l,name:"favorite",checked:s.values.favorite,onChange:s.handleChange,inputProps:{"aria-label":"controlled"},icon:(0,W.jsx)(q.Z,{}),checkedIcon:(0,W.jsx)(S.Z,{})}),label:"favorite"}),(0,W.jsx)(h.Z,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:3,mb:2},children:"Confirm"})]})]})]})})},H=function(e){var n=e.contact,r=(0,d.useState)({isLoading:!1,color:"primary"}),a=(0,s.Z)(r,2),t=a[0],i=a[1],u=(0,d.useState)(!1),h=(0,s.Z)(u,2),m=h[0],x=h[1],f=(0,w.I0)();(0,d.useEffect)((function(){return m&&window.addEventListener("keydown",g),function(){m&&window.removeEventListener("keydown",g)}}));var p=function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({isLoading:!0}),f((0,y.m5)(n.currentTarget.id)).unwrap().then((function(){return(0,k.t5)("Contact delete")})).catch((function(e){i({isLoading:!1}),i({color:"error"}),(0,k.cB)("".concat(e))}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.Z)(l().mark((function e(r){var a,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={favorite:!n.favorite},t=r.currentTarget.id,f((0,y.LN)({id:t,body:a})).unwrap().then((function(e){return e.update.favorite?(0,k.t5)("Contact add to favorite"):(0,k.t5)("Contact remove from favorite")})).catch((function(e){return(0,k.cB)("".concat(e))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(e){"Escape"===e.code&&j()},j=function(){x(!1)};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(c.x,{width:"396px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"15px",bg:"#f7f7ff",children:[(0,W.jsxs)(c.x,{width:"250px",children:[(0,W.jsxs)("p",{children:["Name: ",n.name]}),(0,W.jsxs)("p",{children:["Email: ",n.email]}),(0,W.jsxs)("p",{children:["Phone: ",n.phone]})]}),(0,W.jsx)(_.Z,{id:n._id,type:"button","aria-label":"favorite",size:"small",onClick:v,children:n.favorite?(0,W.jsx)(S.Z,{}):(0,W.jsx)(q.Z,{})}),(0,W.jsx)(_.Z,{type:"button",color:"secondary","aria-label":"edit",size:"small",onClick:function(){x(!0)},children:(0,W.jsx)(B.Z,{})}),(0,W.jsx)(_.Z,{color:t.color,"aria-label":"delete",type:"button",id:n._id,onClick:p,disabled:t.isLoading,size:"small",children:(0,W.jsx)(L.Z,{})})]}),m&&(0,W.jsx)(K,{onBackdropClose:function(e){e.currentTarget===e.target&&j()},children:(0,W.jsx)($,{value:n,close:function(){return j()}})})]})},J=r(1576),M=function(){var e=(0,w.v9)(C.mk),n=(0,w.v9)(C.F4),r=(0,w.v9)(C.Vc);return 0===e.length&&r?(0,W.jsx)(c.x,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,W.jsx)(J.i,{})}):0===e.length?(0,W.jsx)(v.Z,{component:"h1",variant:"h5",textAlign:"center",children:"No contacts ("}):0===n.length?(0,W.jsx)(v.Z,{component:"h1",variant:"h5",textAlign:"center",children:"No contacts with this name("}):(0,W.jsx)(c.x,{as:"ul",display:"flex",flexDirection:"column",alignItems:"center",gridGap:3,children:n.map((function(e){return(0,W.jsx)("li",{children:(0,W.jsx)(H,{contact:e})},e._id)}))})},O=r(1421),Q=r(6895),U=r(1898),X=r(508),Y=r(4887),ee=r(9407),ne=function(){var e=(0,w.I0)(),n=(0,w.v9)(C.zK),r=(0,w.v9)(C.sR);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(x.Z,{maxWidth:"xs",children:[(0,W.jsx)(f.ZP,{}),(0,W.jsxs)(j.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,W.jsx)(p.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,W.jsx)(O.Z,{})}),(0,W.jsx)(v.Z,{component:"h1",variant:"h5",children:"Find contact by name"}),(0,W.jsx)(m.Z,{margin:"normal",fullWidth:!0,name:"filter",label:"Name",value:n,onChange:function(n){var r=n.target.value.trim();e((0,Q.sW)(r))},autoComplete:"off"}),(0,W.jsxs)(U.Z,{fullWidth:!0,children:[(0,W.jsx)(X.Z,{id:"demo-simple-select-label",children:"Filter by favorite"}),(0,W.jsxs)(Y.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:r,label:"Filter by favorite",onChange:function(n){console.log(n.target.value),e((0,Q.i)(n.target.value)),e((0,y.K2)())},children:[(0,W.jsx)(ee.Z,{value:null,children:"All"}),(0,W.jsx)(ee.Z,{value:"true",children:"All favorite"}),(0,W.jsx)(ee.Z,{value:"false",children:"All not fovorite"})]})]})]})]})})},re=function(){var e=(0,w.I0)();return(0,d.useEffect)((function(){var n=new AbortController;return(0,o.Z)(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e((0,y.K2)(n.signal)).unwrap();case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),(0,k.cB)("".concat(r.t0));case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))(),function(){return n.abort()}}),[e]),(0,W.jsxs)(c.x,{as:"main",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:6,children:[(0,W.jsx)(P,{}),(0,W.jsxs)(c.x,{gridArea:"1 / 2 / 2 / 3",children:[(0,W.jsx)(ne,{}),(0,W.jsx)(M,{})]})]})}}}]);
//# sourceMappingURL=808.0bf1fc66.chunk.js.map