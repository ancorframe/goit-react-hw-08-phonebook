"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[808],{4808:function(e,n,r){r.r(n),r.d(n,{ContactsPage:function(){return ae}});var a,t,o=r(9457),i=r(2791),l=r(7103),c=r(7205),s=r(5017),d=r(803),u=r(3793),h=r(3978),m=r(4565),x=r(8619),f=r(228),p=(r(5462),r(5984)),v=r(5705),j=r(5206),g=r(6351),Z=r(3649),b=r(9434),C=r(5672),y=r(5473),w=r(7488),k=r(7237),T=r(1065),q=r(184),E=l.Ry().shape({name:l.Z_().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:l.Z_("Enter your email").email("Enter a valid email").required("Email is required"),phone:l.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(13,"Too Short!").max(13,"Too Long!").required("Required")}),I=function(){var e=(0,p.x0)(),n=(0,p.x0)(),r=(0,p.x0)(),a=(0,p.x0)(),t=(0,b.v9)(g.mk),o=(0,b.I0)(),i=(0,v.TA)({initialValues:{name:"",email:"",phone:"",favorite:!1},validationSchema:E,onSubmit:function(e){if(t.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()})))return(0,C.VW)("".concat(e.name," is already in contacts."));o((0,Z.uK)(e)).unwrap().then((function(){return(0,C.t5)("Contact add to contacts book")})).catch((function(e){return(0,C.cB)("".concat(e))}))}});return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(d.Z,{maxWidth:"xs",children:[(0,q.jsx)(u.ZP,{}),(0,q.jsxs)(f.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,q.jsx)(h.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,q.jsx)(x.Z,{})}),(0,q.jsx)(m.Z,{component:"h1",variant:"h5",children:"Add Contact"}),(0,q.jsxs)(f.Z,{as:"form",onSubmit:i.handleSubmit,sx:{mt:1},children:[(0,q.jsx)(s.Z,{margin:"normal",required:!0,fullWidth:!0,id:e,name:"name",label:"Name",value:i.values.name,onChange:i.handleChange,error:i.touched.name&&Boolean(i.errors.name),helperText:i.touched.name&&i.errors.name,autoComplete:"off"}),(0,q.jsx)(s.Z,{margin:"normal",required:!0,fullWidth:!0,id:r,name:"email",label:"Email",value:i.values.email,onChange:i.handleChange,error:i.touched.email&&Boolean(i.errors.email),helperText:i.touched.email&&i.errors.email,autoComplete:"off"}),(0,q.jsx)(s.Z,{margin:"normal",fullWidth:!0,required:!0,id:n,name:"phone",label:"Phone",type:"tel",value:i.values.phone,onChange:i.handleChange,error:i.touched.phone&&Boolean(i.errors.phone),helperText:i.touched.phone&&i.errors.phone,autoComplete:"off"}),(0,q.jsx)(T.Z,{control:(0,q.jsx)(y.Z,{id:a,name:"favorite",checked:i.values.favorite,onChange:i.handleChange,inputProps:{"aria-label":"controlled"},icon:(0,q.jsx)(w.Z,{}),checkedIcon:(0,q.jsx)(k.Z,{})}),label:"favorite"}),(0,q.jsx)(c.Z,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:3,mb:2},children:"Add contact"})]})]})]}),(0,q.jsx)(j.Ix,{})]})},S=r(5861),W=r(885),P=r(4687),_=r.n(P),B=r(5590),L=r(1286),A=r(7247),R=r(4164),F=r(168),N=r(7691),z=N.ZP.div(a||(a=(0,F.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n"]))),D=N.ZP.div(t||(t=(0,F.Z)(["\n  max-width: calc(100vw - 48px);\n  max-height: calc(100vh - 24px);\n"]))),K=document.querySelector("#modal-root"),V=function(e){var n=e.onBackdropClose,r=e.children;return R.createPortal((0,q.jsx)(z,{onClick:function(e){return n(e)},children:(0,q.jsx)(D,{children:r})}),K)},G=r(4919),$=l.Ry().shape({name:l.Z_().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:l.Z_("Enter your email").email("Enter a valid email").required("Email is required"),phone:l.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(13,"Too Short!").max(13,"Too Long!").required("Required")}),H=function(e){var n=e.value,r=e.close,a=n._id,t=(0,p.x0)(),o=(0,p.x0)(),i=(0,p.x0)(),l=(0,p.x0)(),x=(0,b.I0)(),j=(0,v.TA)({initialValues:{name:n.name,email:n.email,phone:n.phone,favorite:n.favorite},validationSchema:$,onSubmit:function(e){x((0,Z.z)({values:e,id:a})).unwrap().then((function(){(0,C.t5)("Contact modified"),r()})).catch((function(e){return(0,C.cB)("".concat(e))}))}});return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(d.Z,{maxWidth:"xs",children:[(0,q.jsx)(u.ZP,{}),(0,q.jsxs)(f.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#ffffff",padding:"15px",borderRadius:"4px"},children:[(0,q.jsx)(h.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,q.jsx)(G.Z,{})}),(0,q.jsx)(m.Z,{component:"h1",variant:"h5",children:"Edit contact"}),(0,q.jsxs)(f.Z,{as:"form",onSubmit:j.handleSubmit,sx:{mt:1},children:[(0,q.jsx)(s.Z,{margin:"normal",required:!0,fullWidth:!0,id:t,name:"name",label:"Name",value:j.values.name,onChange:j.handleChange,error:j.touched.name&&Boolean(j.errors.name),helperText:j.touched.name&&j.errors.name}),(0,q.jsx)(s.Z,{margin:"normal",required:!0,fullWidth:!0,id:i,name:"email",label:"Email",value:j.values.email,onChange:j.handleChange,error:j.touched.email&&Boolean(j.errors.email),helperText:j.touched.email&&j.errors.email}),(0,q.jsx)(s.Z,{margin:"normal",fullWidth:!0,required:!0,id:o,name:"phone",label:"Phone",type:"tel",value:j.values.phone,onChange:j.handleChange,error:j.touched.phone&&Boolean(j.errors.phone),helperText:j.touched.phone&&j.errors.phone}),(0,q.jsx)(T.Z,{control:(0,q.jsx)(y.Z,{id:l,name:"favorite",checked:j.values.favorite,onChange:j.handleChange,inputProps:{"aria-label":"controlled"},icon:(0,q.jsx)(w.Z,{}),checkedIcon:(0,q.jsx)(k.Z,{})}),label:"favorite"}),(0,q.jsx)(c.Z,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:3,mb:2},children:"Confirm"})]})]})]})})},J=function(e){var n=e.contact,r=(0,i.useState)({isLoading:!1,color:"primary"}),a=(0,W.Z)(r,2),t=a[0],l=a[1],c=(0,i.useState)(!1),s=(0,W.Z)(c,2),d=s[0],u=s[1],h=(0,b.I0)();(0,i.useEffect)((function(){return d&&window.addEventListener("keydown",f),function(){d&&window.removeEventListener("keydown",f)}}));var m=function(){var e=(0,S.Z)(_().mark((function e(n){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({isLoading:!0}),h((0,Z.m5)(n.currentTarget.id)).unwrap().then((function(){return(0,C.t5)("Contact delete")})).catch((function(e){l({isLoading:!1}),l({color:"error"}),(0,C.cB)("".concat(e))}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,S.Z)(_().mark((function e(r){var a,t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={favorite:!n.favorite},t=r.currentTarget.id,h((0,Z.LN)({id:t,body:a})).unwrap().then((function(e){return e.update.favorite?(0,C.t5)("Contact add to favorite"):(0,C.t5)("Contact remove from favorite")})).catch((function(e){return(0,C.cB)("".concat(e))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(e){"Escape"===e.code&&p()},p=function(){u(!1)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(o.x,{width:"396px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"15px",bg:"#f7f7ff",children:[(0,q.jsxs)(o.x,{width:"250px",children:[(0,q.jsxs)("p",{children:["Name: ",n.name]}),(0,q.jsxs)("p",{children:["Email: ",n.email]}),(0,q.jsxs)("p",{children:["Phone: ",n.phone]})]}),(0,q.jsx)(B.Z,{id:n._id,type:"button","aria-label":"favorite",size:"small",onClick:x,children:n.favorite?(0,q.jsx)(k.Z,{}):(0,q.jsx)(w.Z,{})}),(0,q.jsx)(B.Z,{type:"button",color:"secondary","aria-label":"edit",size:"small",onClick:function(){u(!0)},children:(0,q.jsx)(L.Z,{})}),(0,q.jsx)(B.Z,{color:t.color,"aria-label":"delete",type:"button",id:n._id,onClick:m,disabled:t.isLoading,size:"small",children:(0,q.jsx)(A.Z,{})})]}),d&&(0,q.jsx)(V,{onBackdropClose:function(e){e.currentTarget===e.target&&p()},children:(0,q.jsx)(H,{value:n,close:function(){return p()}})})]})},M=r(1576),O=function(){var e=(0,b.v9)(g.mk),n=(0,b.v9)(g.F4),r=(0,b.v9)(g.Vc);return 0===e.length&&r?(0,q.jsx)(o.x,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,q.jsx)(M.i,{})}):0===e.length?(0,q.jsx)(m.Z,{component:"h1",variant:"h5",textAlign:"center",children:"No contacts ("}):0===n.length?(0,q.jsx)(m.Z,{component:"h1",variant:"h5",textAlign:"center",children:"No contacts with this name("}):(0,q.jsx)(o.x,{as:"ul",display:"flex",flexDirection:"column",alignItems:"center",gridGap:3,children:n.map((function(e){return(0,q.jsx)("li",{children:(0,q.jsx)(J,{contact:e})},e._id)}))})},Q=r(1421),U=r(6895),X=r(1898),Y=r(508),ee=r(4887),ne=r(9407),re=function(){var e=(0,b.I0)(),n=(0,b.v9)(g.zK),r=(0,b.v9)(g.sR);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(d.Z,{maxWidth:"xs",children:[(0,q.jsx)(u.ZP,{}),(0,q.jsxs)(f.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,q.jsx)(h.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,q.jsx)(Q.Z,{})}),(0,q.jsx)(m.Z,{component:"h1",variant:"h5",children:"Find contact by name"}),(0,q.jsx)(s.Z,{margin:"normal",fullWidth:!0,name:"filter",label:"Name",value:n,onChange:function(n){var r=n.target.value.trim();e((0,U.sW)(r))},autoComplete:"off"}),(0,q.jsxs)(X.Z,{fullWidth:!0,children:[(0,q.jsx)(Y.Z,{id:"demo-simple-select-label",children:"Filter by favorite"}),(0,q.jsxs)(ee.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:r,label:"Filter by favorite",onChange:function(n){console.log(n.target.value),e((0,U.i)(n.target.value)),e((0,Z.K2)())},children:[(0,q.jsx)(ne.Z,{value:null,children:"All"}),(0,q.jsx)(ne.Z,{value:"true",children:"All favorite"}),(0,q.jsx)(ne.Z,{value:"false",children:"All not fovorite"})]})]})]})]})})},ae=function(){var e=(0,b.I0)();return(0,i.useEffect)((function(){var n=new AbortController;return e((0,Z.K2)(n.signal)).unwrap().then().catch((function(e){return(0,C.cB)("".concat(e))})),function(){return n.abort()}}),[e]),(0,q.jsxs)(o.x,{as:"main",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:6,children:[(0,q.jsx)(I,{}),(0,q.jsxs)(o.x,{gridArea:"1 / 2 / 2 / 3",children:[(0,q.jsx)(re,{}),(0,q.jsx)(O,{})]})]})}}}]);
//# sourceMappingURL=808.48b8a855.chunk.js.map