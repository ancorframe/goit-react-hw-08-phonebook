"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[808],{4808:function(e,n,r){r.r(n),r.d(n,{ContactsPage:function(){return te}});var a,t,o=r(5861),i=r(4687),l=r.n(i),c=r(9457),s=r(885),d=r(2791),u=r(7103),h=r(7205),m=r(5017),x=r(803),p=r(3793),f=r(3978),v=r(4565),g=r(8619),j=r(6015),Z=r(5984),b=r(5705),C=r(6351),y=r(3649),w=r(9434),k=r(5672),T=r(5473),q=r(7488),S=r(7237),E=r(1065),I=r(184),W=u.Ry().shape({name:u.Z_().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:u.Z_("Enter your email").email("Enter a valid email").required("Email is required"),phone:u.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(13,"Too Short!").max(13,"Too Long!").required("Required")}),B=function(){var e=(0,Z.x0)(),n=(0,Z.x0)(),r=(0,Z.x0)(),a=(0,Z.x0)(),t=(0,w.v9)(C.mk),i=(0,w.I0)(),c=(0,d.useState)(null),u=(0,s.Z)(c,2),B=u[0],P=u[1],_=(0,b.TA)({initialValues:{name:"",email:"",phone:"",favorite:!1},validationSchema:W,onSubmit:function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),!t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))){e.next=3;break}return e.abrupt("return",(0,k.VW)("".concat(n.name," is already in contacts.")));case 3:return e.prev=3,e.next=6,i((0,y.uK)(n));case 6:return e.next=8,i((0,y.K2)());case 8:P(!1),(0,k.t5)("Contact add to contacts book"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),P(!1),(0,k.cB)("".concat(e.t0));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(n){return e.apply(this,arguments)}}()});return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{maxWidth:"xs",children:[(0,I.jsx)(p.ZP,{}),(0,I.jsxs)(j.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,I.jsx)(f.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,I.jsx)(g.Z,{})}),(0,I.jsx)(v.Z,{component:"h1",variant:"h5",children:"Add Contact"}),(0,I.jsxs)(j.Z,{as:"form",onSubmit:_.handleSubmit,sx:{mt:1},children:[(0,I.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:e,name:"name",label:"Name",value:_.values.name,onChange:_.handleChange,error:_.touched.name&&Boolean(_.errors.name),helperText:_.touched.name&&_.errors.name,autoComplete:"off"}),(0,I.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:r,name:"email",label:"Email",value:_.values.email,onChange:_.handleChange,error:_.touched.email&&Boolean(_.errors.email),helperText:_.touched.email&&_.errors.email,autoComplete:"off"}),(0,I.jsx)(m.Z,{margin:"normal",fullWidth:!0,required:!0,id:n,name:"phone",label:"Phone",type:"tel",value:_.values.phone,onChange:_.handleChange,error:_.touched.phone&&Boolean(_.errors.phone),helperText:_.touched.phone&&_.errors.phone,autoComplete:"off"}),(0,I.jsx)(E.Z,{control:(0,I.jsx)(T.Z,{id:a,name:"favorite",checked:_.values.favorite,onChange:_.handleChange,inputProps:{"aria-label":"controlled"},icon:(0,I.jsx)(q.Z,{}),checkedIcon:(0,I.jsx)(S.Z,{})}),label:"favorite"}),(0,I.jsx)(h.Z,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:3,mb:2},disabled:B,children:"Add contact"})]})]})]})})},P=(r(5462),r(5590)),_=r(1286),L=r(7247),A=r(4164),R=r(168),F=r(7691),K=F.ZP.div(a||(a=(0,R.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n"]))),N=F.ZP.div(t||(t=(0,R.Z)(["\n  max-width: calc(100vw - 48px);\n  max-height: calc(100vh - 24px);\n"]))),z=document.querySelector("#modal-root"),D=function(e){var n=e.onBackdropClose,r=e.children;return A.createPortal((0,I.jsx)(K,{onClick:function(e){return n(e)},children:(0,I.jsx)(N,{children:r})}),z)},V=r(4919),$=u.Ry().shape({name:u.Z_().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:u.Z_("Enter your email").email("Enter a valid email").required("Email is required"),phone:u.Z_().matches(/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,"Phone number is not valid").min(13,"Too Short!").max(13,"Too Long!").required("Required")}),G=function(e){var n=e.value,r=e.close,a=n._id,t=(0,Z.x0)(),o=(0,Z.x0)(),i=(0,Z.x0)(),l=(0,Z.x0)(),c=(0,w.I0)(),s=(0,b.TA)({initialValues:{name:n.name,email:n.email,phone:n.phone,favorite:n.favorite},validationSchema:$,onSubmit:function(e){c((0,y.z)({values:e,id:a})).unwrap().then((function(){(0,k.t5)("Contact modified"),r()})).catch((function(e){return(0,k.cB)("".concat(e))}))}});return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{maxWidth:"xs",children:[(0,I.jsx)(p.ZP,{}),(0,I.jsxs)(j.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#ffffff",padding:"15px",borderRadius:"4px"},children:[(0,I.jsx)(f.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,I.jsx)(V.Z,{})}),(0,I.jsx)(v.Z,{component:"h1",variant:"h5",children:"Edit contact"}),(0,I.jsxs)(j.Z,{as:"form",onSubmit:s.handleSubmit,sx:{mt:1},children:[(0,I.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:t,name:"name",label:"Name",value:s.values.name,onChange:s.handleChange,error:s.touched.name&&Boolean(s.errors.name),helperText:s.touched.name&&s.errors.name}),(0,I.jsx)(m.Z,{margin:"normal",required:!0,fullWidth:!0,id:i,name:"email",label:"Email",value:s.values.email,onChange:s.handleChange,error:s.touched.email&&Boolean(s.errors.email),helperText:s.touched.email&&s.errors.email}),(0,I.jsx)(m.Z,{margin:"normal",fullWidth:!0,required:!0,id:o,name:"phone",label:"Phone",type:"tel",value:s.values.phone,onChange:s.handleChange,error:s.touched.phone&&Boolean(s.errors.phone),helperText:s.touched.phone&&s.errors.phone}),(0,I.jsx)(E.Z,{control:(0,I.jsx)(T.Z,{id:l,name:"favorite",checked:s.values.favorite,onChange:s.handleChange,inputProps:{"aria-label":"controlled"},icon:(0,I.jsx)(q.Z,{}),checkedIcon:(0,I.jsx)(S.Z,{})}),label:"favorite"}),(0,I.jsx)(h.Z,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{mt:3,mb:2},children:"Confirm"})]})]})]})})},H=function(e){var n=e.contact,r=(0,d.useState)({isLoading:!1,color:"primary"}),a=(0,s.Z)(r,2),t=a[0],i=a[1],u=(0,d.useState)(!1),h=(0,s.Z)(u,2),m=h[0],x=h[1],p=(0,w.I0)();(0,d.useEffect)((function(){return m&&window.addEventListener("keydown",g),function(){m&&window.removeEventListener("keydown",g)}}));var f=function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({isLoading:!0}),e.prev=1,e.next=4,p((0,y.m5)(n.currentTarget.id)).unwrap();case 4:return(0,k.t5)("Contact delete"),e.next=7,p((0,y.K2)());case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),i({isLoading:!1}),i({color:"error"}),(0,k.cB)("".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.Z)(l().mark((function e(r){var a,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={favorite:!n.favorite},t=r.currentTarget.id,e.prev=2,e.next=5,p((0,y.LN)({id:t,body:a})).unwrap();case 5:e.sent.update.favorite?(0,k.t5)("Contact add to favorite"):(0,k.t5)("Contact remove from favorite"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,k.cB)("".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),g=function(e){"Escape"===e.code&&j()},j=function(){x(!1)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(c.x,{width:"396px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"15px",bg:"#f7f7ff",children:[(0,I.jsxs)(c.x,{width:"250px",children:[(0,I.jsxs)("p",{children:["Name: ",n.name]}),(0,I.jsxs)("p",{children:["Email: ",n.email]}),(0,I.jsxs)("p",{children:["Phone: ",n.phone]})]}),(0,I.jsx)(P.Z,{id:n._id,type:"button","aria-label":"favorite",size:"small",onClick:v,children:n.favorite?(0,I.jsx)(S.Z,{}):(0,I.jsx)(q.Z,{})}),(0,I.jsx)(P.Z,{type:"button",color:"secondary","aria-label":"edit",size:"small",onClick:function(){x(!0)},children:(0,I.jsx)(_.Z,{})}),(0,I.jsx)(P.Z,{color:t.color,"aria-label":"delete",type:"button",id:n._id,onClick:f,disabled:t.isLoading,size:"small",children:(0,I.jsx)(L.Z,{})})]}),m&&(0,I.jsx)(D,{onBackdropClose:function(e){e.currentTarget===e.target&&j()},children:(0,I.jsx)(G,{value:n,close:function(){return j()}})})]})},J=r(1576),M=r(4585),O=r(3661),Q=function(){var e=(0,w.v9)(C.fx),n=(0,w.v9)(C.VC),r=(0,w.I0)(),a=(0,w.v9)(C.mk),t=(0,w.v9)(C.F4),i=(0,w.v9)(C.Vc),s=function(){var e=(0,o.Z)(l().mark((function e(n,a){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r((0,O.T$)(a));case 3:return e.next=5,r((0,y.K2)());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,k.cB)("".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,r){return e.apply(this,arguments)}}();return 0===a.length&&i?(0,I.jsx)(c.x,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,I.jsx)(J.i,{})}):0===a.length?(0,I.jsx)(v.Z,{component:"h1",variant:"h5",textAlign:"center",children:"No contacts ("}):0===t.length?(0,I.jsx)(v.Z,{component:"h1",variant:"h5",textAlign:"center",children:"No contacts with this name("}):(0,I.jsxs)(c.x,{as:"ul",display:"flex",flexDirection:"column",alignItems:"center",gridGap:3,pb:"25px",children:[t.map((function(e){return(0,I.jsx)("li",{children:(0,I.jsx)(H,{contact:e})},e._id)})),(0,I.jsx)(M.Z,{count:n,page:e,onChange:s,disabled:1===n})]})},U=r(1421),X=r(6895),Y=r(1898),ee=r(508),ne=r(4887),re=r(9407),ae=function(){var e=(0,w.I0)(),n=(0,w.v9)(C.zK),r=(0,w.v9)(C.sR);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{maxWidth:"xs",children:[(0,I.jsx)(p.ZP,{}),(0,I.jsxs)(j.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,I.jsx)(f.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,I.jsx)(U.Z,{})}),(0,I.jsx)(v.Z,{component:"h1",variant:"h5",children:"Find contact by name"}),(0,I.jsx)(m.Z,{margin:"normal",fullWidth:!0,name:"filter",label:"Name",value:n,onChange:function(n){var r=n.target.value.trim();e((0,X.sW)(r))},autoComplete:"off"}),(0,I.jsxs)(Y.Z,{fullWidth:!0,children:[(0,I.jsx)(ee.Z,{id:"demo-simple-select-label",children:"Filter by favorite"}),(0,I.jsxs)(ne.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:null===r?"all":r,label:"Filter by favorite",onChange:function(n){var r="all"===n.target.value?null:n.target.value;e((0,X.i)(r)),e((0,y.K2)())},children:[(0,I.jsx)(re.Z,{value:"all",children:"All"}),(0,I.jsx)(re.Z,{value:"true",children:"All favorite"}),(0,I.jsx)(re.Z,{value:"false",children:"All not fovorite"})]})]})]})]})})},te=function(){var e=(0,w.I0)();return(0,d.useEffect)((function(){var n=new AbortController;return(0,o.Z)(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e((0,y.K2)(n.signal)).unwrap();case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),(0,k.cB)("".concat(r.t0));case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))(),function(){return n.abort()}}),[e]),(0,I.jsxs)(c.x,{as:"main",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:6,children:[(0,I.jsx)(B,{}),(0,I.jsxs)(c.x,{gridArea:"1 / 2 / 2 / 3",children:[(0,I.jsx)(ae,{}),(0,I.jsx)(Q,{})]})]})}}}]);
//# sourceMappingURL=808.e5498970.chunk.js.map